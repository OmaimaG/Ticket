{"ast":null,"code":"import axios from 'axios';\nexport const getAllTickets = async () => {\n  try {\n    // Récupérez le jeton depuis sessionStorage\n    const token = response.data.token; // Assurez-vous que cela correspond à la clé utilisée dans la réponse du serveur\n\n    // Enregistrez le token dans localStorage\n    localStorage.setItem('accessToken', token);\n    token = sessionStorage.getItem('token');\n    console.log(token);\n\n    // Vérifiez si le jeton existe\n    if (!token) {\n      throw new Error('Access token is missing.'); // Gérez le cas où le jeton est manquant\n    }\n\n    const response = await axios.get('http://localhost:5000/ticket', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    // Si la requête réussit, retournez les données de la réponse\n    return response.data;\n  } catch (error) {\n    // Si une erreur se produit, rejetez la promesse avec l'objet d'erreur\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","getAllTickets","token","response","data","localStorage","setItem","sessionStorage","getItem","console","log","Error","get","headers","Authorization","error"],"sources":["C:/ticket/ticketproject/client/src/api/ticketApi.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport const getAllTickets = async () => {\r\n  try {\r\n    // Récupérez le jeton depuis sessionStorage\r\n    const token = response.data.token; // Assurez-vous que cela correspond à la clé utilisée dans la réponse du serveur\r\n\r\n// Enregistrez le token dans localStorage\r\n       localStorage.setItem('accessToken', token);\r\n    token = sessionStorage.getItem('token');\r\n    console.log(token);\r\n    \r\n    // Vérifiez si le jeton existe\r\n    if (!token) {\r\n      throw new Error('Access token is missing.'); // Gérez le cas où le jeton est manquant\r\n    }\r\n\r\n    const response = await axios.get('http://localhost:5000/ticket', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    // Si la requête réussit, retournez les données de la réponse\r\n    return response.data;\r\n  } catch (error) {\r\n    // Si une erreur se produit, rejetez la promesse avec l'objet d'erreur\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvC,IAAI;IACF;IACA,MAAMC,KAAK,GAAGC,QAAQ,CAACC,IAAI,CAACF,KAAK,CAAC,CAAC;;IAEvC;IACOG,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,KAAK,CAAC;IAC7CA,KAAK,GAAGK,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;IACvCC,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;;IAElB;IACA,IAAI,CAACA,KAAK,EAAE;MACV,MAAM,IAAIS,KAAK,CAAC,0BAA0B,CAAC,CAAC,CAAC;IAC/C;;IAEA,MAAMR,QAAQ,GAAG,MAAMH,KAAK,CAACY,GAAG,CAAC,8BAA8B,EAAE;MAC/DC,OAAO,EAAE;QACPC,aAAa,EAAG,UAASZ,KAAM;MACjC;IACF,CAAC,CAAC;;IAEF;IACA,OAAOC,QAAQ,CAACC,IAAI;EACtB,CAAC,CAAC,OAAOW,KAAK,EAAE;IACd;IACA,MAAMA,KAAK;EACb;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}